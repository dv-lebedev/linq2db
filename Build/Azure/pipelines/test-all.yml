variables:
- template: templates/test-vars.yml
- template: templates/test-matrix.yml
  solution: 'linq2db.sln'
  build_configuration: 'Azure'
  assemblyVersion: 3.0.0


trigger: none
pr:
  branches:
    include:
    - '*'

stages:
- stage: ''
  displayName: ''
  jobs:
##############
#  BUILD JOB #
##############
  - template: templates/build-job.yml
    parameters:
      for_nuget: false

#############
# TEST JOBS #
#############
  - template: templates/test-jobs.yml
    parameters:
      enabled: and(succeeded(), ne(variables['Build.SourceBranchName'], 'release'))
      experimental: false
      test_matrix: variables['text_matrix']
